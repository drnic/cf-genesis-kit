---
instance_groups:
- name: blobstore
  instances:  (( grab params.blobstore_instances ))

meta:
  blobstore:
    user: blobstore
    password: (( vault meta.vault "/blobstore/creds:password" ))
    secret:   (( vault meta.vault "/blobstore/creds:secret" ))
    ca_cert: (( vault meta.vault "/blobstore/certs/ca:certificate" ))

  blobstore_config:
    blobstore_type: webdav
    webdav_config:
      public_endpoint: (( concat "https://blobstore." params.system_domain ))
      private_endpoint: https://blobstore.service.cf.internal:4443
      username: (( grab meta.blobstore.user ))
      password: (( grab meta.blobstore.password ))
      ca_cert: (( grab meta.blobstore.ca_cert ))
